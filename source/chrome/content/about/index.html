<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <base href="chrome://weave/content/about/"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>About:Weave</title>
    <link rel="stylesheet" type="text/css" media="all" href="css/screen.css" />
    <link rel="stylesheet" type="text/css" media="all" href="css/mobile.css" />
    <link rel="stylesheet" type="text/css" media="all"
          href="../ext/jquery.fancybox/jquery.fancybox.css" />
    <script type="text/javascript" src="../ext/jquery/js/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="../ext/jquery/js/jquery-ui-1.7.1.custom.min.js"></script>
    <script type="text/javascript" src="../ext/jquery.fancybox/jquery.fancybox-1.2.1.js"></script>
    <script type="application/javascript;version=1.8" src="../load-weave.js"></script>
    <script type="application/javascript;version=1.8" src="about.js"></script>
  </head>

  <body>
    <div id="header">
      <div class="logo"><img alt="weave logo" src="images/weave_logo.png"/></div>
      <div class="welcome localized"></div>
      <ul id="top-menu">
        <li id="tools-menu" onclick="About.toggleMenu('tools-menu');">
          <span id="tools-menu-title" class="title">Tools</span>
          <span class="menu-arrow">&laquo;</span>
          <ul class="menu-dropdown">
<!--  fixme: wraps?          <li id="server-settings-item">Server settings</li> -->
            <li id="activity-log-item"
                onclick="Weave.Utils.openLog();">Debug Log</li>
            <li id="start-over-item" onclick="About.showBubble('startover');">Start Over</li>
          </ul>
        </li>
        <li id="user-menu" class="disabled" onclick="About.toggleMenu('user-menu');">
          <span class="title">Signed out</span>
          <span class="menu-arrow">&laquo;</span>
          <ul class="menu-dropdown">
            <li id="sign-out-item" onclick="Weave.Service.logout();">Sign out</li>
            <li id="myacct-item"
                onclick="About.showBubble('myacct');">My Account</li>
            <li id="sync-now-item"
                onclick="Weave.Service.sync();">Sync Now</li>
          </ul>
        </li>
      </ul>
    </div>

    <div id="container">
      <div id="elements">
        <div id="device"> <!-- onclick="About.toggleBubble('clientinfo');"> -->
          <img alt="device" src="images/desktop_device.png" />
        </div>
        <div id="status"> <!-- onclick="About.toggleMiddleBubble();"> -->
          <div id="status-arrow"><img alt="status-arrow" src="images/sync_disconnected.png"/></div>
<!--          <div id="status-1">(idle)</div> -->
          <div id="status-partial">Weave is still in the process of retrieving
          your data. If you don't see some data, Weave will catch up soon
          &mdash; you don't need to do anything.</div>
        </div>
        <div id="cloud"> <!-- onclick="About.toggleBubble('cloudinfo');"> -->
          <div id="quota-bar" class="progress-bar">70%</div>
        </div>
      </div>

      <div id="bubble">
        <div id="welcome" class="bubble">
          <h1 id="welcome-title">Welcome To Sync</h1>
          <p id="welcome-1">Do you already have a Weave account?</p>
          <input id="welcome-yes" type="button" value="yes"
                 onclick="About.showBubble('signin');" />
          <input id="welcome-no" type="button" value="no" />
        </div>

        <div id="signin" class="bubble">
          <h1 id="signin-title">Sign In</h1>

          <ul>
            <li>
              <label id="signin-username-label" for="signin-username">Username</label>
              <input id="signin-username" type="text" oninput="About.onSigninInput();" />
            </li>
            <li>
              <label id="signin-password-label" for="signin-password">Password</label>
              <input id="signin-password" type="password" oninput="About.onSigninInput();" />
            </li>
            <li>
              <label id="signin-passphrase-label" for="signin-passphrase">Secret phrase</label>
              <input id="signin-passphrase" type="password" oninput="About.onSigninInput();" />
              <span id="signin-new-passphrase">(new secret)</span>
            </li>
          </ul>

          <div id="signin-forgot-links">
            <a href="#" onclick="return About.showBubble('forgot-pw');">I forgot my password</a><br/>
            <a href="#" onclick="return About.showBubble('forgot-pp');">I forgot my secret phrase</a>
          </div>

          <div class="buttons">
            <hr/>
            <input type="button" class="prev" value="prev"
                   onclick="About.showBubble('welcome');" />
            <img alt="working..." src="images/throbber.gif" class="throbber"/>
            <input type="button" class="next" value="next" disabled="disabled"
                   onclick="About.signIn();" />
          </div>
          <div class="advanced-tab">
            <div class="advanced-tab-content">
              <div class="row-left">
                <label>
                  <input id="auto-checkbox" type="checkbox" />
                  <span id="auto-label">Keep me signed into Weave</span>
                </label>
              </div>
              <div class="row-left">
                <span id="">Encrypt my data and save it with:</span>
                <div class="row-left">
                <label>
                  <input name="server-which" id="server-mozilla" type="radio" />
                  <span id="">Mozilla</span>
                </label>
                <label>
                  <input name="server-which" id="server-custom" type="radio" />
                  <span id="">A custom Weave server</span>
                </label>
                <input id="server-url" type="text" class="no-field-helper"
                       oninput="About.onSigninInput();" />
                </div>
              </div>
            </div>
            <div class="advanced-tab-title"
                 onclick="$('#signin .advanced-tab-content').toggleClass('advanced-tab-content-visible');">
              Custom settings<span class="tab-arrow">&laquo;</span>
            </div>
          </div>

<!--      <div class="help-tab">
            <img alt="help" src="images/help.png" onclick="About.toggleHelp();"/>
          </div>
          <div class="bubble-help">
            <div id="help-helpme" class="help-item">
              <h3 class="help-item-title">I'm stuck! What do I do?</h3>
              <div class="help-item-content">
                <p id="help-helpme-1">If you're stuck, you might want to try the FAQ or the Weave discussion group.</p>
              </div>
            </div>
          </div> -->
        </div>

        <div id="mobile" class="bubble">
          <h1 id="mobile-title">Mobile Setup</h1>
          <p id="mobile-1">Use Firefox to create a Weave account and synchronize
          your data.</p>
          <p id="mobile-2">After doing so, return here to sign in with your
          Weave account and get access to your Firefox history, bookmarks, etc.
          from this device.</p>
          <input id="mobile-next" type="button" value="sign in"
                 onclick="About.showBubble('signin');" />
        </div>

        <div id="syncdir" class="bubble">
          <h1 id="syncdir-title">Sync Direction</h1>

          <div class="row-left">
            <input id="syncdir-merge" type="radio"
                   name="syncdir" value="merge" checked="checked"/>
            <label id="syncdir-merge-label" for="syncdir-merge">Merge
            this computer's data with the cloud
            <span class="recommended">(Recommended)</span></label>
          </div>
          
          <div class="row-left">
            <input id="syncdir-wipe-local" type="radio"
                   name="syncdir" value="wipe-local"/>
            <label id="syncdir-wipe-local-label" for="syncdir-wipe-local">Replace
            this computer's data with data from the cloud</label>
          </div>

          <div class="row-left">
            <input id="syncdir-wipe-remote" type="radio"
                   name="syncdir" value="wipe-remote"/>
            <label id="syncdir-wipe-remote-label" for="syncdir-wipe-remote">
              Replace data on the cloud with this computer's data
            </label>
          </div>

          <div class="buttons">
            <hr/>
            <input type="button" class="prev" value="prev"
                   onclick="About.showBubble('data');" />
            <img alt="loading captcha..." src="images/throbber.gif" class="throbber"/>
            <input type="button" class="next" value="next"
                   onclick="About.onSyncdirNext();"/>
          </div>
        </div>

        <div id="newacct" class="bubble">
          <h1 id="newacct-title">New Account</h1>

          <ul>
            <li>
              <label id="newacct-username-label" for="newacct-username">Username</label>
              <input id="newacct-username" type="text"
                     oninput="About.onNewacctUsernameInput();"
                     onblur="About.onNewacctUsernameBlur();"/>
              <div id="newacct-username-available" class="ok">
                <div class="arrow"></div>
                <div class="content">available</div>
              </div>
            </li>
            <li id="newacct-username-unavailable" class="error">
              Username unavailable, try a different one
            </li>
            <li>
              <label id="newacct-password-label" for="newacct-password">Password</label>
              <input id="newacct-password" type="password"
                     oninput="About.onNewacctPassInput();"
                     onblur="About.onNewacctPassBlur();"/>
            </li>
            <li>
              <label id="newacct-email-label" for="newacct-email">Email</label>
              <input id="newacct-email" type="text" oninput="About.onNewacctInput();"/>
            </li>
          </ul>

          <hr/>

          <label id="newacct-captcha-label" for="captcha-response">Type these words below:</label>
          <div id="newacct-captcha">
            <iframe id="captcha-iframe" style="display:none;"
                    onload="About.onCaptchaLoaded();"></iframe>
            <input id="captcha-challenge" type="text" style="display:none;" />
            <div id="captcha-image">
              <img alt="loading captcha..." src="images/throbber.gif" class="throbber"/>
            </div>
            <div id="captcha-controls">
              <img alt="zoom captcha" id="captcha-zoom" src="images/magnify.png"
                   class="captcha-control" onclick="About.zoomCaptcha();"/>
              <img alt="reload captcha" src="images/reload.png" class="captcha-control"
                   onclick="About.loadCaptcha();"/>
              <img alt="audio captcha" src="images/audio.png" class="captcha-control"
                   onclick="About.toggleCaptchaAudio();"/>
            </div>
            <div><input id="captcha-response" type="text" oninput="About.onNewacctInput();"/></div>
          </div>

          <hr/>

          <label class="toggle">
            <input id="newacct-tos-checkbox" type="checkbox" onclick="About.onNewacctInput();" />
            <span id="newacct-tos-label">
              I agree to the <a href="#" onclick="return false;">TOS</a>
            </span>
            <span class="toggle-right">no</span><span class="toggle-left">yes</span>
          </label>

          <div class="buttons">
            <hr/>
            <input type="button" class="prev" onclick="About.showBubble('welcome');" />
            <img alt="working..." src="images/throbber.gif" class="throbber"/>
            <input type="button" class="next" disabled="disabled"
                   onclick="About.onNewacctNext();" />
          </div>
<!--
          <div class="help-tab">
            <img alt="help" src="images/help.png" onclick="About.toggleHelp();"/>
          </div>
          <div class="bubble-help">
            <div id="help-user-taken" class="help-item">
              <h3 class="help-item-title">My username won't work</h3>
              <div class="help-item-content">
                <p id="help-user-taken-1">Your username might be taken, try adding numbers or additional words to it.</p>
                <p id="help-user-taken-2">Additionally, you can't use special symbols or spaces inside usernames.</p>
              </div>
            </div>
            <div id="help-newacct-pass" class="help-item">
              <h3 class="help-item-title">Weave won't accept my password or passphrase</h3>
              <div class="help-item-content">
                <p id="help-newacct-pass-1">The password and passphrase must be different.</p>
              </div>
            </div>
            <div id="help-no-captcha" class="help-item">
              <h3 class="help-item-title">I can't see the verification image</h3>
              <div class="help-item-content">
                <p id="help-no-captcha-1">Some add-ons can interfere with the verification image.  Try disabling NoScript or similar add-ons.</p>
              </div>
            </div>
          </div>
-->
          <div class="advanced-tab">
            <div class="advanced-tab-content">
              <div class="row-left">
                <span id="">Create my account with:</span>
                <div class="row-left">
                <label>
                  <input name="server-which" id="c-server-mozilla" type="radio" />
                  <span id="">Mozilla</span>
                </label>
                <label>
                  <input name="server-which" id="c-server-custom" type="radio" />
                  <span id="">A custom Weave server</span>
                </label>
                <input id="c-server-url" type="text" class="no-field-helper" />
                </div>
              </div>
            </div>
            <div class="advanced-tab-title"
                 onclick="$('#newacct .advanced-tab-content').toggleClass('advanced-tab-content-visible');">
              Server settings<span class="tab-arrow">&laquo;</span>
            </div>
          </div>
        </div>

        <div id="newacct2" class="bubble">
          <h1 id="newacct2-title">Secret Phrase</h1>

          <p>User creation successful!</p>
          <p>To protect your privacy, enter a secret phrase below. It will be
          used to encrypt your data before anything is uploaded, so only you
          will have access.</p>
          <p>The secret phrase is never sent to the server and is only used on
          this device. So make sure you remember the secret phrase; otherwise,
          you won't be able to access your data.</p>
          <ul>
            <li>
              <label id="newacct2-passphrase-label" for="newacct2-passphrase">Secret phrase</label>
              <input id="newacct2-passphrase" type="password"
                     oninput="About.onNewacct2Input();"
                     onblur="About.onNewacct2Blur();" />
            </li>
          </ul>

          <div class="buttons">
            <hr/>
            <img alt="working..." src="images/throbber.gif" class="throbber"/>
            <input id="newacct2-next" type="button" class="next"
                   disabled="disabled" value="next"
                   onclick="About.onNewacct2Next();" />
          </div>
        </div>

        <div id="data" class="bubble">
          <h1 id="data-title"></h1>

          <p id="data-1">Great! Now select what data you want to sync:</p>

          <!-- note: this table is built dynamically based on loaded engines -->
          <table class="data-types">
            <tr>
              <td>
                <table><tr>
                  <td><h3>Bookmarks</h3></td>
                  <td>
                    <label class="toggle">
                      <input type="checkbox" />
                      <span class="toggle-left">on</span><span class="toggle-right">off</span>
                    </label>
                  </td>
                </tr></table>
                <p>Keep your favorite links always at hand</p>
              </td>
            </tr>
          </table>

          <div class="buttons">
            <hr/>
            <input id="data-next" type="button" class="next" value="next"
                   onclick="About.showBubble('finished');"/>
          </div>
        </div>

        <div id="finished" class="bubble">
          <h1 id="finished-title">All Done!</h1>
          <p>You're all set! The sync process will begin shortly; please be
          patient while Weave synchronizes your data.</p>
          <p>You can close this tab at any time. To return to it, select
          "Preferences" in the Weave menu, or simply navigate to "about:weave"
          in the location bar.</p>
          <p>If you have other devices, please have them Sync Now so that they
          know to send data here.</p>
          <div class="buttons">
            <input id="finished-close" type="button" value="dismiss"
                   onclick="About.hideBubble();"/>
          </div>
        </div>

        <div id="myacct" class="bubble">
          <h1 id="myacct-title">My Account</h1>
          <p id="myacct-1">You can change your password or secret
          phrase by typing in new ones below:</p>
          <div class="row">
            <label>Username <span id="myacct-username" class="value">...</span></label>
          </div>
<!-- fixme: don't have this info client-side
           <li>
              <span id="myacct-email-label" class="label">Email</span>
              <span id="myacct-email" class="value">...</span>
            </li> -->
          <div class="row">
            <label id="myacct-password-label">Password
            <input id="myacct-password" type="password" class="value"
                   onfocus="About.onMyacctPasswordFocus();"/></label>
              <input id="myacct-set-pw" type="button" value="set"
                     onclick="About.setPassword();"/>
          </div>
          <div class="row">
            <label id="myacct-passphrase-label">Secret phrase
              <input id="myacct-passphrase" type="password" class="value"
                     onfocus="About.onMyacctPassphraseFocus();"/></label>
              <input id="myacct-set-pp" type="button" value="set"
                     onclick="About.setPassphrase();"/>
          </div>

          <div class="buttons">
            <img alt="working..." src="images/throbber.gif" class="throbber"/>
            <input id="myacct-close" type="button" class="next" value="close"
                   onclick="About.hideBubble();" />
          </div>
        </div>

        <div id="startover" class="bubble">
          <h1 id="startover-title">Start Over</h1>

          <p id="startover-1">Is something not correctly synchronized?
          You can tell Weave to re-sync all your data from
          scratch.</p>

          <p id="startover-2">You will run through the setup process
          again (so make sure you know your login information!).</p>

          <div class="buttons">
            <input id="startover-ok" type="button" value="cancel" class="prev"
                   onclick="location.reload();" />
            <input id="startover-ok" type="button" value="start over" class="next"
                   onclick="About.startoverOk();" />
          </div>
        </div>

        <div id="startover2" class="bubble">
          <h1 id="startover2-title">Reset Complete</h1>
          <p id="startover2-1">Weave on this computer has been reset.
          Click the ok button to reload this page and start the Weave
          setup process.</p>
          <div class="buttons">
            <input id="startover2-ok" type="button" value="ok"
                   onclick="location.reload();" />
          </div>
        </div>

        <div id="forgot-pw" class="bubble">
          <h1 id="forgot-pw-title">Forgotten Password</h1>

          <p id="forgot-pw-1">Type in your username and we'll send you
          an email so you can reset your password:</p>
          <div class="row">
            <label>Username <input id="forgot-pw-box" type="text" /></label>
          </div>

          <div class="buttons">
            <hr/>
            <img alt="working..." src="images/throbber.gif" class="throbber"/>
            <input id="forgot-pw-ok" type="button" class="next" value="ok"
                   onclick="About.forgotPasswordOk();" />
          </div>
        </div>

        <div id="forgot-pw2" class="bubble">
          <h1 id="forgot-pw2-title">Check Your Email!</h1>

          <p id="forgot-pw2-1">We've sent you an email to your address
          on file.  Please check it and follow the instructions to
          reset your password.</p>

          <div class="buttons">
            <hr/>
            <input id="forgot-pw2-ok" type="button" class="next" value="ok"
                   onclick="About.showBubble('signin');" />
          </div>
        </div>

        <div id="forgot-pp" class="bubble">
          <h1 id="forgot-pp-title">Forgotten Secret Phrase</h1>

          <p id="forgot-pp-1">If you can't remember your secret
          phrase, you can pick a new one.</p>

          <p id="forgot-pp-2">All your data on the server must be
          deleted and re-uploaded, because it cannot be
          recovered.</p>

          <p id="forgot-pp-3">Tip: If you have Weave on another
          machine, you can view the secret by opening the password
          manager in the Firefox options.</p>

          <div class="row-center">
            <label>New secret phrase
            <input id="forgot-pp-box" type="password" /></label>
          </div>

          <div class="buttons">
            <hr/>
            <input id="forgot-pw-ok" type="button" class="next" value="ok"
                   onclick="About.forgotPassphraseOk();" />
          </div>
        </div>

        <!-- Bubbles in the center, under the arrow/status -->

        <div id="willsync" class="bubble bubble-center">
          <h1 id="willsync-title">Account Created!</h1>
          <p id="willsync-1">Syncing your data in %S seconds...</p>
          <input id="willsync-config" type="button" value="modify sync settings"
                 onclick="About.willsyncSettings();" />
        </div>

        <!-- Bubbles under the device -->

        <div id="setup" class="bubble bubble-left">
          <h1 id="setup-title">Sync Settings</h1>
          <p id="setup-1">Check the things you'd like to sync:</p>
          <ul id="choose-data-list">
            <!-- auto-generated list here -->
            <li></li>
          </ul>
          <input id="setup-sync" type="button" onclick="About.syncNow();" />
        </div>

        <div id="clientinfo" class="bubble bubble-left">
          <input id="clientinfo-name" type="text" class="no-field-helper"
                 oninput="About.onNameChange();" />

          <!-- fixme: make these images and bypass localization -->
          <input id="clientinfo-type-desktop" type="button" value="desktop"
                 onclick="About.setDeviceType('desktop');" />
          <!--                <input id="clientinfo-type-laptop" type="button" value="laptop"
               onclick="About.setDeviceType('laptop');" /> -->
          <input id="clientinfo-type-laptop" type="button" value="laptop"
                 onclick="About.setDeviceType('laptop');" />
          <input id="clientinfo-type-mobile" type="button" value="mobile"
                 onclick="About.setDeviceType('mobile');" />

          <input id="clientinfo-prefs" type="button" onclick="About.showBubble('setup');" />
        </div>

        <!-- Bubbles under the cloud -->

        <div id="cloudinfo" class="bubble bubble-right">
          <h1 id="cloudinfo-title">What's In The Cloud?</h1>
          <!-- fixme: figure out how to localize these -->
          <ul id="cloud-data-list">
            <li>123 bookmarks</li>
            <li>456 history URLs</li>
            <li>78 tabs</li>
            <li>(these are made up, sorry!)</li>
          </ul>
          <input id="cloudinfo-erase" type="button" value="erase"
                 onclick="About.wipeServer();" />
        </div>
      </div>
    </div>
  </body>
</html>
